<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <style>
    .actor { font: 14px Arial; font-weight:700; }
    .lifeline { stroke: #aaa; stroke-dasharray: 4 4; }
    .message { stroke: #333; stroke-width:2; marker-end: url(#arrow); }
    .box { fill: #f8fafc; stroke:#cbd5e1; }
    .note { font: 13px Arial; fill:#333; }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 z" fill="#333" />
    </marker>
  </defs>

  <text x="20" y="30" font-size="18" font-weight="700">Sequence Diagram â€” Submit Blood Request</text>

  <!-- Actors -->
  <text x="60" y="80" class="actor">Hospital</text>
  <text x="320" y="80" class="actor">Frontend/API</text>
  <text x="640" y="80" class="actor">Backend (Controller)</text>
  <text x="920" y="80" class="actor">Blood Center Service</text>
  <text x="1120" y="80" class="actor">Database</text>

  <!-- Lifelines -->
  <line x1="80" y1="100" x2="80" y2="600" class="lifeline" />
  <line x1="360" y1="100" x2="360" y2="600" class="lifeline" />
  <line x1="680" y1="100" x2="680" y2="600" class="lifeline" />
  <line x1="960" y1="100" x2="960" y2="600" class="lifeline" />
  <line x1="1160" y1="100" x2="1160" y2="600" class="lifeline" />

  <!-- Messages -->
  <line x1="120" y1="140" x2="320" y2="140" class="message" />
  <text x="220" y="130" class="note" text-anchor="middle">1. Hospital fills request form</text>

  <line x1="360" y1="160" x2="680" y2="160" class="message" />
  <text x="520" y="150" class="note" text-anchor="middle">2. POST /api/blood-requests (payload)</text>

  <line x1="700" y1="180" x2="960" y2="180" class="message" />
  <text x="830" y="170" class="note" text-anchor="middle">3. Controller validates & forwards to Service</text>

  <line x1="980" y1="200" x2="1160" y2="200" class="message" />
  <text x="1070" y="190" class="note" text-anchor="middle">4. Service queries DB for available centers</text>

  <line x1="1160" y1="220" x2="980" y2="220" class="message" />
  <text x="1070" y="210" class="note" text-anchor="middle">5. DB returns matching centers</text>

  <line x1="960" y1="240" x2="680" y2="240" class="message" />
  <text x="820" y="230" class="note" text-anchor="middle">6. Service selects center(s) & allocates</text>

  <line x1="680" y1="260" x2="360" y2="260" class="message" />
  <text x="520" y="250" class="note" text-anchor="middle">7. Controller returns 201 Created (request id)</text>

  <line x1="360" y1="280" x2="120" y2="280" class="message" />
  <text x="220" y="270" class="note" text-anchor="middle">8. Frontend shows success to Hospital</text>

  <!-- Notifications flow -->
  <line x1="680" y1="320" x2="960" y2="320" class="message" />
  <text x="820" y="310" class="note" text-anchor="middle">9. Notify selected Blood Center(s)</text>

  <line x1="960" y1="340" x2="360" y2="340" class="message" />
  <text x="660" y="330" class="note" text-anchor="middle">10. Acknowledge receipt</text>

  <rect x="320" y="380" width="110" height="40" class="box" />
  <text x="375" y="405" text-anchor="middle" class="note">End</text>

  <text x="20" y="640" class="note">Notes: Alternate flows include no centers found (step 5 returns empty), validation errors (step 3) and escalations when a center does not respond in time.</text>
</svg>